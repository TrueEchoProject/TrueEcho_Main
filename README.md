<div align="center" >

# TrueEcho

<h3> 진실된 모습으로 소통하는 앱 </h3>

<img src="https://github.com/TrueEchoProject/TrueEcho_Main/assets/106599507/4c98706b-7d99-4f7e-8cef-c9ea09ef0899" width="250" height="250"/>

[![Hits](https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fgithub.com%2FTrueEchoProject%2FTrueEcho_Main&count_bg=%23B2C3EE&title_bg=%23555555&icon=&icon_color=%23E7E7E7&title=hits&edge_flat=false)](https://hits.seeyoufarm.com)


</div>




---

## ✨ 프로젝트 소개

### 비전 및 목표
- TrueEcho는 사용자가 자신의 진솔한 모습을 공유
- 네트워킹을 통해 자존감을 높이며 지속적인 성장을 도모할 수 있는 SNS 플랫폼
- 친구들과 자연스러운 일상을 나누고, 재미있는 콘텐츠를 통해 소통

### 기술적 목표
- React Native를 활용한 사용자 친화적인 UI/UX 개발
- Spring Boot를 활용한 RESTful API 설계 및 구현
- MariaDB와의 효율적인 데이터베이스 통신
- Firebase Cloud Messaging(FCS)를 활용한 실시간 알림 기능 구현
- Google Play Store에 배포하기 위한 CI/CD 구축
- Google Play Store 자동 배포 시스템 구축
- 팀원 간의 협업을 위한 그라운드 룰 수립

### 📚 기술 스택

### 프론트엔드

<img src="https://img.shields.io/badge/React Native-61DAFB?style=flat&logo=React&logoColor=white" alt="React Native Badge"/><img src="https://img.shields.io/badge/javascript-F7DF1E?style=flat&logo=javascript&logoColor=white" alt="javascript Badge"/><img src="https://img.shields.io/badge/Figma-F24E1E?style=flat&logo=Figma&logoColor=white" alt="Figma Badge"/>

### 백엔드

<img src="https://img.shields.io/badge/Spring Boot-6DB33F?style=flat&logo=Spring Boot&logoColor=white" alt="Spring Boot Badge"/><img src="https://img.shields.io/badge/MariaDB-003545?style=flat&logo=MariaDB&logoColor=white" alt="MariaDB Badge"/><img src="https://img.shields.io/badge/Firebase-FFCA28?style=flat&logo=Firebase&logoColor=white" alt="Firebase Badge"/><img src="https://img.shields.io/badge/REST API-005571?style=flat&logo=Swagger&logoColor=white" alt="REST API Badge"/>

### 📑 프로젝트 노션 링크
[![Notion](https://img.shields.io/badge/Notion-TrueEcho-%23000000?style=for-the-badge&logo=notion&logoColor=white)](https://bamlatte.notion.site/TrueEcho-5901c5f619ac4247bc2609efb5e22561?pvs=4)

<a href="">
<img src="https://github.com/boostcampwm2023/and07-MindSync/assets/39490416/0072864a-ab3f-474b-a3ad-52904d662a1c" width=400 height=150/>
</a>
<br>
(추후 플레이스토어에 배포 후 추가 예정)

---
## 🎯 기술적 도전

### 프론트엔드
- [내용추가](홈페이지)

### 백엔드
- [FCM을 사용한 효율적인 알림 시스템 구현](https://bamlatte.notion.site/754b4397b4fe483e917a85b3b5d4117c?pvs=4)

## 🚀 문제 해결 과정
- [N + 1 문제를 극악무도하게 66.7%  최적화한 이야기](https://bamlatte.notion.site/1-N-9a0675cb8a0d40c899a0f816be641413?pvs=4)_
- [JPA 성능 최적화: N+1 문제 해결로 97% 성과를 얻다](https://bamlatte.notion.site/09c78c60348e4aca9b637d90061b186b?pvs=4)
- [IntelliJ 사용자를 위한 .env 파일로 개발 환경 보호하기](https://bamlatte.notion.site/7c3c15df48884d7b8ab57e6e604ced85?pvs=4)
---

## 👨‍👩‍👧‍👦 팀원 소개
| 서희준 | 박준형 |                             백효영                              | 박신형 | 강상호 |
| :---: | :---: |:------------------------------------------------------------:| :---: | :---: |
| <img src="https://github.com/HeeJohn.png" width="100"/> | <img src="https://github.com/jun10920.png" width="100"/> | <img src="https://github.com/HyoYoung0829.png" width="100"/> | <img src="https://github.com/HolMoly.png" width="100"/> | <img src="https://github.com/sh7558.png" width="100"/> |
| **Backend** | **Backend** |                         **Frontend**                         | **Frontend** | **Frontend** |
| [@HeeJohn](https://github.com/HeeJohn) | [@jun10920](https://github.com/jun10920) |         [@HyoYoung](https://github.com/HyoYoung0829)         | [@HolyMoly](https://github.com/HolMoly) | [@sh7558](https://github.com/sh7558) |

---

## 📅 계획
<img src="https://github.com/boostcampwm2023/and07-MindSync/assets/106599507/90f991e5-e7ff-44a3-862d-d0f90f88636c" height=400/>

## 📌 요구 및 CSC, CSU 분석
- 타 게시물에 대한 호기심
- 하루에 한 번 무작위 시간에 사진 촬영 알림
- 현실적인 상황을 컨텐츠로 생성
- 복잡한 기능이 없는 직관적인 촬영 단계
- 게시물을 통해서 진행하는 재미 컨텐츠
- 쉬운 친구 추가 & 삭제

### 기능 요구사항
<img src="https://github.com/TrueEchoProject/TrueEcho_Main/assets/106599507/94f8f740-53b1-4dd6-8b1e-7263cdadf49c" height=400/>

### 요구사항에서 비롯된 CSC
<img src="https://github.com/TrueEchoProject/TrueEcho_Main/assets/106599507/d5a3b6ee-1a0c-4e1b-8473-df3408f38a6d" height=400/>

### CSC에서 비롯된 CSU
<img src="https://github.com/TrueEchoProject/TrueEcho_Main/assets/106599507/66788768-01b4-43be-86ef-431303a5964b" height=300/>

### 개발 세부 내용(계속 추가)
<details>
  <summary>개발 세부 내용</summary>

| 항목 | 하위 항목 |
| --- | --- |
| 회원 관리 | 회원, 회원가입 [시간대 설정], 로그인: one-way 암호화, 로그아웃 (토큰 삭제), 회원 정보 수정, 탈퇴, 차단, 핀 설정 및 삭제 (나중으로 변경) |
| 회원 식별 (토큰) | 토큰 생성, 토큰 검증, 토큰 재생성, 예외처리 |
| 친구 관리 | 친구 추가, 친구 삭제, 친구 추천 알고리즘 (전화번호로 찾기, 친구 동기화) |
| 사진 & 촬영 | Azure 구축, 이미지 업로드, URL 저장, Post 테이블에 저장 |
| 게시물 | 게시물 출력 (친구, 랜덤 게시물), 정렬, 필터링, 댓글, 좋아요, 게시물에서 친구 추가 |
| 투표 | 투표지 구축, 투표지 유저 출력, 뽑기 알고리즘, 투표 결과 저장 |
| 랭킹 | 주차별 랭킹 정보 최신화 로직 (일요일 8시), 쿼리 1: WHERE week -> vote_id로 group(), 쿼리 2: target_user로 group() -> 카운트 -> 탑 3 |
| 알림 | 무작위 알림 로직, Web socket 구현, 랭크 알림 (일요일 8시), 투표 결과 알림 (투표 받을 시 익명 x), 댓글 알림, 좋아요 알림 |
| 설정 기능 | 알림 권한 설정, 노출 설정, 시간대 수정 |
| 에러 처리 & 최적화 | 에러 처리, 최적화 |
| 배포 | 배포 |
| ORM - 엔티티 | 각 테이블 연관 관계 점검, 앤티티 정의, 편의 메서드 작성 |
| 각 단계별 테스트 | 유닛 테스트, 통합 테스트 진행 |
</details>

---

## 🏛️ 서비스 구성

### 아키텍처
<img src="https://github.com/TrueEchoProject/TrueEcho_Main/assets/106599507/4945edca-86a9-4460-befa-561f96add95e" height=400/>

### 시스템 흐름도
<img src="https://github.com/TrueEchoProject/TrueEcho_Main/assets/106599507/61f0f9ad-af40-4544-a32f-0d9e3f928247" height=400/>

### 데이터베이스 ERD
<div align="center">
  <img src="https://github.com/TrueEchoProject/TrueEcho_Main/assets/106599507/c3566260-bd34-4897-b788-c13f49a0e371" alt="erd" height="700"/>
</div>

#### ERD 설명
<details>
  <summary>테이블 1: Users</summary>

| 컬럼 | 타입 | 설명 |
| --- | --- | --- |
| user_id | BIGINT | Primary Key |
| connect_by_friend | BIT |  |
| user_birthday | DATE |  |
| created_at | DATETIME |  |
| rank_id | BIGINT | Foreign Key, references Ranks(rank_id) |
| user_name | VARCHAR(20) |  |
| user_nick_name | VARCHAR(20) |  |
| refresh_token | VARCHAR(255) |  |
| user_email | VARCHAR(255) |  |
| user_location | VARCHAR(255) |  |
| user_password | VARCHAR(255) |  |
| user_gender | ENUM |  |
| user_profile_url | TEXT |  |
| user_role | ENUM |  |
| fcm_token | VARCHAR(255) |  |
| notification_setting_id | BIGINT | Foreign Key, references Notification_setting(notification_setting_id) |
| x | DOUBLE |  |
| y | DOUBLE |  |

</details>

<details>
  <summary>테이블 2: Votes</summary>

| 컬럼 | 타입 | 설명 |
| --- | --- | --- |
| vote_id | BIGINT | Primary Key |
| vote_title | VARCHAR(255) |  |
| vote_category | ENUM |  |

</details>

<details>
  <summary>테이블 3: Vote_results</summary>

| 컬럼 | 타입 | 설명 |
| --- | --- | --- |
| vote_result_id | BIGINT | Primary Key |
| created_at | DATETIME |  |
| user_id_target | BIGINT | Foreign Key, references Users(user_id) |
| user_id_voter | BIGINT | Foreign Key, references Users(user_id) |
| vote_id | BIGINT | Foreign Key, references Votes(vote_id) |

</details>

<details>
  <summary>테이블 4: Notifications</summary>

| 컬럼 | 타입 | 설명 |
| --- | --- | --- |
| notifications_id | BIGINT | Primary Key |
| created_at | DATETIME |  |
| body | VARCHAR(255) |  |
| content_id | BIGINT |  |
| noti_type | INT |  |
| sender_id | BIGINT | Foreign Key, references Users(user_id) |
| title | VARCHAR(255) |  |
| like_id | BIGINT | Foreign Key, references Likes(like_id) |
| comment_id | BIGINT | Foreign Key, references Comments(comm_id) |
| rank_id | BIGINT | Foreign Key, references Ranks(rank_id) |
| vote_result_id | BIGINT | Foreign Key, references Vote_results(vote_result_id) |

</details>

<details>
  <summary>테이블 5: Ranks</summary>

| 컬럼 | 타입 | 설명 |
| --- | --- | --- |
| rank_id | BIGINT | Primary Key |
| rank_level | INT |  |
| rank_week | DATE |  |

</details>

<details>
  <summary>테이블 6: Likes</summary>

| 컬럼 | 타입 | 설명 |
| --- | --- | --- |
| like_id | BIGINT | Primary Key |
| post_id | BIGINT | Foreign Key, references Posts(post_id) |
| user_id | BIGINT | Foreign Key, references Users(user_id) |

</details>

<details>
  <summary>테이블 7: Posts</summary>

| 컬럼 | 타입 | 설명 |
| --- | --- | --- |
| post_id | BIGINT | Primary Key |
| created_at | DATETIME |  |
| user_id | BIGINT | Foreign Key, references Users(user_id) |
| post_title | VARCHAR(255) |  |
| post_status | ENUM |  |
| post_url_back | TEXT |  |
| post_url_front | TEXT |  |

</details>

<details>
  <summary>테이블 8: Pins</summary>

| 컬럼 | 타입 | 설명 |
| --- | --- | --- |
| pin_id | BIGINT | Primary Key |
| created_at | DATETIME |  |
| post_id | BIGINT | Foreign Key, references Posts(post_id) |
| user_id | BIGINT | Foreign Key, references Users(user_id) |

</details>

<details>
  <summary>테이블 9: Comments</summary>

| 컬럼 | 타입 | 설명 |
| --- | --- | --- |
| comm_id | BIGINT | Primary Key |
| created_at | DATETIME |  |
| main_comment_id | BIGINT |  |
| post_id | BIGINT | Foreign Key, references Posts(post_id) |
| user_id | BIGINT | Foreign Key, references Users(user_id) |
| comment_content | TINYTEXT |  |
| notifications_id | BIGINT | Foreign Key, references Notifications(notifications_id) |

</details>

<details>
  <summary>테이블 10: Notification_setting</summary>

| 컬럼 | 타입 | 설명 |
| --- | --- | --- |
| notification_setting_id | BIGINT | Primary Key |
| setting_noti_comment | BIT |  |
| setting_noti_friend | BIT |  |
| setting_noti_like | BIT |  |
| setting_noti_time | DATETIME |  |
| setting_noti_rank | BIT |  |
| setting_noti_vote | BIT |  |
| setting_noti_service | BIT |  |
| setting_noti_in_rank | BIT |  |
| setting_noti_new_rank | BIT |  |
| setting_noti_rival | BIT |  |
| setting_noti_time_status | ENUM |  |

</details>

<details>
  <summary>테이블 11: Suspended_users</summary>

| 컬럼 | 타입 | 설명 |
| --- | --- | --- |
| suspended_date | DATE |  |
| suspended_user_id | BIGINT | Primary Key, references Users(user_id) |
| user_id | BIGINT | Primary Key, references Users(user_id) |

</details>

<details>
  <summary>테이블 12: Blocks</summary>

| 컬럼 | 타입 | 설명 |
| --- | --- | --- |
| block_id | BIGINT | Primary Key |
| block_user_id | BIGINT | Foreign Key, references Users(user_id) |
| user_id | BIGINT | Foreign Key, references Users(user_id) |

</details>

<details>
  <summary>테이블 13: Friends</summary>

| 컬럼 | 타입 | 설명 |
| --- | --- | --- |
| friend_id | BIGINT | Primary Key |
| send_user_id | BIGINT | Foreign Key, references Users(user_id) |
| target_user_id | BIGINT | Foreign Key, references Users(user_id) |
| friend_status | ENUM |  |

</details>

---

## ⚒️ 주요 기능

### 🔔 알림

무작위 알림이 발생하면 3분 안에 사진을 찍어야합니다.
<br>
다른 알림도 유저들 간에 발생합니다.

<table>
  <tr>
    <th>기능</th>
    <th>설명</th>
  </tr>
  <tr>
    <td><strong>무작위</strong></td>
    <td>알림 <-> 촬영 시간 비교 (2분)</td>
  </tr>
  <tr>
    <td><strong>일반</strong></td>
    <td>공지사항 / 댓글 / 좋아요</td>
  </tr>
</table>

<img src="https://github.com/TrueEchoProject/TrueEcho_Main/assets/106599507/545bbce1-e0a7-47b3-9d38-58d263f5ee4d" width="300"/>

### 📷 카메라

커스텀 카메라로 본인과 주변 모습을 담습니다.

<table>
  <tr>
    <th>기능</th>
    <th>설명</th>
  </tr>
  <tr>
    <td><strong>전/후면 촬영</strong></td>
    <td>현재 자신의 모습과 주변 환경을 담기 위한 촬영</td>
  </tr>
  <tr>
    <td><strong>줌 인/아웃</strong></td>
    <td>기본적인 줌인/줌아웃 기능 구현</td>
  </tr>
  <tr>
    <td><strong>플래쉬</strong></td>
    <td>플래쉬 ON/OFF/AUTO 기능 구현</td>
  </tr>
</table>

<img src="https://github.com/TrueEchoProject/TrueEcho_Main/assets/106599507/fe2f659d-f2fb-4b67-a8a4-3174f6d4435a" width="300"/>

### 👍 메인 피드

게시물에 좋아요와 댓글을 달아 친구들과 소통할 수 있습니다.

<table>
  <tr>
    <th>기능</th>
    <th>설명</th>
  </tr>
  <tr>
    <td><strong>전/후면 스왑</strong></td>
    <td>유저의 얼굴 사진과 배경 사진의 자유로운 전환</td>
  </tr>
  <tr>
    <td><strong>좋아요</strong></td>
    <td>유저끼리의 소통을 위한 좋아요 기능 구현</td>
  </tr>
  <tr>
    <td><strong>댓글</strong></td>
    <td>유저끼리의 소통을 위한 댓글 기능 구현</td>
  </tr>
</table>

<img src="https://github.com/TrueEchoProject/TrueEcho_Main/assets/106599507/f19a8e5f-ed57-4b0c-bb6f-bbfae422fa47" width="300"/>

### 🗳️ 커뮤니티

카테고리에 맞게 투표할 수 있는 기능을 제공합니다. 투표 결과에 따라 사용자 랭킹이 결정됩니다.

<table>
  <tr>
    <th>기능</th>
    <th>설명</th>
  </tr>
  <tr>
    <td><strong>투표</strong></td>
    <td>랜덤한 질문 + 유저 컨텐츠</td>
  </tr>
  <tr>
    <td><strong>투표 결과</strong></td>
    <td>축적된 투표결과 랭킹화</td>
  </tr>
</table>

<img src="https://github.com/TrueEchoProject/TrueEcho_Main/assets/106599507/6915bc74-216c-465e-9b6d-d33d79c70bad" width="300"/>

### 👥 친구 관리

친구 관리 및 추천 기능을 통해 네트워킹을 강화할 수 있습니다.

<table>
  <tr>
    <th>기능</th>
    <th>설명</th>
  </tr>
  <tr>
    <td><strong>친구추천</strong></td>
    <td>유저간 친구 관계를 식별하여 친구 추천</td>
  </tr>
  <tr>
    <td><strong>친구관리</strong></td>
    <td>보낸 친구요청 / 받은 친구요청 확인하여 원활한 친구관리</td>
  </tr>
</table>

<img src="https://github.com/TrueEchoProject/TrueEcho_Main/assets/106599507/abb78213-2a75-43e0-887c-7d84e1580e0b" width="300"/>




